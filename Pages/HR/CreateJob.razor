@page "/createjob"
@inject HttpClient HttpClient
@inject IJSRuntime jsRuntime
@inject NavigationManager nav

<style>
/*Scrollbar track*/


    ::-webkit-scrollbar {
        width: 10px !important;
        background-color: white !important;
        cursor:pointer !important;
        
    }

    ::-webkit-scrollbar-track {
        background: white !important;
       
    }

    ::-webkit-scrollbar-thumb {
        /* background: #f7f7f7 !important;*/
        background: #666666 !important;
    }

        ::-webkit-scrollbar-thumb:hover {
            background: #666666 !important;
            cursor: pointer !important;
        }
      .container-createjob {
            width: 100%;
            height: 90vh;
            overflow:hidden;
        }
       
        .createjob-top{
            margin-top: 5vh;
            height: 5vh;
            display: flex;
        }
        .createjob-top-bottom{
            height: 3vh;
        }
        .createjob-bottom{
            width: 100%;
            margin-top: 3vh;
            height: 65vh;
        }
    .createjob-createjob-top-mini {
        height: 5vh;
        width: 100%;
        text-align: center;
    }
        .collaborators-createjob-top-mini {
            height: 5vh;
            width: 100%;
            color: #666666;
            text-align: center;
        }
    .applicationform-createjob-top-mini {
        height: 5vh;
        width: 100%;
        color: #666666;
        text-align: center;
    }
    .phases-createjob-top-mini {
        height: 5vh;
        width: 100%;
        color: #666666;
        text-align: center;
    }
        .createjob-top-number-div:hover{
            cursor: pointer !important;
            color: #a7a1a7 !important;
        }
       
        .createjob-top-number-div {
            padding-top: 1vh;
            height: 5vh;
            padding-bottom: 1vh;
        }
        .createjob-top-text-div {
            height: 3vh;
            width: 100%;
        }
        .createjob-top-number {
            font-weight: 900;
            font-size: 1em;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            
            font-size: 2em;
        }
        .create-job-top-text {
            font-family: opensans-condensed-bold;
            font-weight: 800;
            font-size: 1em;
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
           
        }
        .createjob-arrow {
            background-color: transparent;
            height: 5px;
            border-radius: 2em;
            margin-top: 3vh;
        }
        .createjob-bottom-container {
            height: 60vh;
            margin-top: 5vh;
        }
        .createjob-bottom-main-container {
            height: 60vh;
        }
        .createjob-bottom-main {
            height: 55vh;
            width: 100%;
        }
        .createjob-bottom-main-button{
            height: 5vh;
            width: 10%;
            margin-left: 45%;
            margin-right: 45%;
            margin-top: 2vh;
            background-color: #00bcae;
            border: none;
            border-radius: 2em;
            color: white;
            text-align: center;
            font-family: opensans-bold;
            font-weight: 700;
        }
        .createjob-bottom-main-button:hover {
           
            width: 10%;
            margin-left: 45%;
            margin-right: 45%;
            margin-top: 2vh;
            background-color: #d35bc9;
            border: none;
            border-radius: 2em;
            color: white;
            text-align: center;
            font-family: opensans-bold;
            font-weight: 700;
        }
       .createjob-nav-buttons{
           height: 10vh;
           margin-top: 15vh;
           text-align: center;
           font-size: 50px;
           color: #00bcae;
       }
        .createjob-nav-buttons:hover {
            margin-top: 15vh;
            text-align: center;
            font-size: 50px;
            color: #d35bc9;
        }
        .select-collaborators {
            text-align: center;
            width: 45%;
            margin-left: 5%;
            height: 55vh;
        }
   .hr-createjob-div{
       height: 5vh;
       width: 15%;
   }
   .hr-createjob-div-space{
       width: 4.16%;
       height: 5vh;
   }
</style>

<!--Body Page-->
<div class="container-createjob">
    <div class="createjob-top">
        <div class="hr-createjob-div-space"></div>
        <div class="hr-createjob-div">
            <div class="createjob-createjob-top-mini" @onclick="() => NavigateToSection(CreateJobSection.CreateJob)">
                <div class="createjob-top-number-div" style="@GetActiveColor(CreateJobSection.CreateJob)">
                    <i class="fas fa-cubes createjob-top-number"></i>
                    <h3 class="create-job-top-text">Create A Job</h3>
                </div>
            </div>
        </div>
        <div class="hr-createjob-div-space"></div>
        <div class="hr-createjob-div">
            <div class="createjob-createjob-top-mini" @onclick="() => NavigateToSection(CreateJobSection.SendToLinkedIn)">
                <div class="createjob-top-number-div" style="@GetActiveColor(CreateJobSection.SendToLinkedIn)">
                    <i class="fab fa-linkedin createjob-top-number"></i>
                    <h3 class="create-job-top-text">Select Platform</h3>
                </div>
            </div>
        </div>
        <div class="hr-createjob-div-space"></div>
        <div class="hr-createjob-div">
            <div class="applicationform-createjob-top-mini" @onclick="() => NavigateToSection(CreateJobSection.CreateApplicationForm)">
                <div class="createjob-top-number-div" style="@GetActiveColor(CreateJobSection.CreateApplicationForm)">
                    <i class="fab fa-wpforms createjob-top-number"></i>
                    <h3 class="create-job-top-text">Create Application Form</h3>
                </div>
            </div>
        </div>
        <div class="hr-createjob-div-space"></div>
        <div class="hr-createjob-div">
            <div class="collaborators-createjob-top-mini" @onclick="() => NavigateToSection(CreateJobSection.SelectCollaborators)">
                <div class="createjob-top-number-div" style="@GetActiveColor(CreateJobSection.SelectCollaborators)">
                    <i class="fas fa-users createjob-top-number"></i>
                    <h3 class="create-job-top-text">Select Collaborators </h3>
                </div>
            </div>
        </div>
        <div class="hr-createjob-div-space"></div>
        <div class="hr-createjob-div">
            <div class="phases-createjob-top-mini" @onclick="() => NavigateToSection(CreateJobSection.SelectPhase)">
                <div class="createjob-top-number-div" style="@GetActiveColor(CreateJobSection.SelectPhase)">
                    <i class="fas fa-clipboard-check createjob-top-number"></i>
                    <h3 class="create-job-top-text">Select Phases</h3>
                </div>
            </div>
        </div>
        <div class="hr-createjob-div-space"></div>
    </div>

    <div class="row createjob-bottom">
        <div class="col-1"></div>
        <div class="row createjob-bottom-container" hidden="@CreateJobIsHidden">
            <div class="col-1"></div>
            <div class="col-10 createjob-bottom-main-container">
                <div class="createjob-bottom-main">
                    <XebecPortal.UI.Pages.HR.CreateAJobForm @bind-TempJob="tempJob" />
                </div>
            </div>
            <div class="col-1"></div>
        </div>

        <div class="row createjob-bottom-container" hidden="@LinkedInIsHidden">
            <div class="col-1"></div>            
            <div class="col-10 createjob-bottom-main-container">
                <div class="createjob-bottom-main">
                    <XebecPortal.UI.Pages.HR.LinkedInSend @bind-TempJob="tempJob" />
                </div>
            </div>
            <div class="col-1"></div>
        </div>

        <div class="row createjob-bottom-container" hidden="@CollaboratorsIsHidden">
            <div class="col-1"></div>
            <div class="col-10 createjob-bottom-main-container">
                <div class="createjob-bottom-main">
                    <XebecPortal.UI.Pages.HR.Collaborators ChosenQuestions="ChosenQuestions" @bind-TempJob="tempJob" />
                </div>
            </div>
            <div class="col-1"></div>
        </div>
        <div class="row createjob-bottom-container" hidden="@ApplicationFormIsHidden">
            <div class="col-1"></div>
            <div class="col-10 createjob-bottom-main-container">
                <div class="createjob-bottom-main">
                    <XebecPortal.UI.Pages.HR.ApplicationFormControlTool @bind-FormQuestions="ChosenQuestions" @bind-TempJob="tempJob" />
                </div>
            </div>
            <div class="col-1"></div>
        </div>
        <div class="row createjob-bottom-container" hidden="@PhasesIsHidden">
            <div class="col-1"></div>
            <div class="col-10 createjob-bottom-main-container">
                <div class="createjob-bottom-main">
                    <XebecPortal.UI.Pages.HR.PhaseControlTool @bind-TempJob="tempJob" />
                </div>
            </div>
            <div class="col-1"></div>
        </div>
    </div>
</div>

@code {

    private bool CreateJobIsHidden, LinkedInIsHidden, CollaboratorsIsHidden, ApplicationFormIsHidden, PhasesIsHidden;

    CreateJobPost tempJob = new CreateJobPost {Collaborators = new List<AppUser>(), JobPlatforms = new List<JobPlatform>(), formQuestions = new List<FormQuestion>(), JobPhases = new List<ApplicationPhase>(), JobType = new JobType()};
    
    public List<FormQuestion> ChosenQuestions { get; set; }
    protected override async Task OnInitializedAsync()
    {
        if (ChosenQuestions == null)
        {
            ChosenQuestions = new();
        }
        CreateJobIsHidden = false;
        LinkedInIsHidden = CollaboratorsIsHidden = ApplicationFormIsHidden = PhasesIsHidden = true;
    }

    private void ShowCreateJob()
    {
        CreateJobIsHidden = false;
        LinkedInIsHidden = CollaboratorsIsHidden = ApplicationFormIsHidden = PhasesIsHidden = true;
    }

    private void ShowLinkedIn()
    {
        LinkedInIsHidden = false;
        CreateJobIsHidden = CollaboratorsIsHidden = ApplicationFormIsHidden = PhasesIsHidden = true;
    }

    private void ShowCollaborators()
    {
        CollaboratorsIsHidden = false;
        LinkedInIsHidden = CreateJobIsHidden = ApplicationFormIsHidden = PhasesIsHidden = true;
    }

    private void ShowApplicationForm()
    {
        ApplicationFormIsHidden = false;
        LinkedInIsHidden = CreateJobIsHidden = CollaboratorsIsHidden = PhasesIsHidden = true;
    }

    private void ShowPhases()
    {
        PhasesIsHidden = false;
        LinkedInIsHidden = CreateJobIsHidden = ApplicationFormIsHidden = CollaboratorsIsHidden = true;
    }

    private enum CreateJobSection
    {
        CreateJob,
        SendToLinkedIn,
        SelectCollaborators,
        CreateApplicationForm,
        SelectPhase
    }

    private string GetActiveColor(CreateJobSection section)
    {
        switch (section)
        {
            case CreateJobSection.CreateJob:
                if (!CreateJobIsHidden)
                    return "color: #d35bc9  !important;";
                return "color: #00bcae  !important;";
            case CreateJobSection.SendToLinkedIn:
                if (!LinkedInIsHidden)
                    return "color: #d35bc9  !important;";
                return "color: #00bcae  !important;";
            case CreateJobSection.SelectCollaborators:
                if (!CollaboratorsIsHidden)
                    return "color: #d35bc9  !important;";
                return "color: #00bcae  !important;";
            case CreateJobSection.CreateApplicationForm:
                if (!ApplicationFormIsHidden)
                    return "color: #d35bc9  !important;";
                return "color: #00bcae  !important;";
            case CreateJobSection.SelectPhase:
                if (!PhasesIsHidden)
                    return "color: #d35bc9  !important;";
                return "color: #00bcae  !important;";
            default:
                throw new ArgumentOutOfRangeException(nameof(section), section, null);
        }
    }

    private void NavigateToSection(CreateJobSection section)
    {
        switch (section)
        {
            case CreateJobSection.CreateJob:
                ShowCreateJob();
                break;
            case CreateJobSection.SendToLinkedIn:
                ShowLinkedIn();
                break;
            case CreateJobSection.SelectCollaborators:
                ShowCollaborators();
                break;
            case CreateJobSection.CreateApplicationForm:
                ShowApplicationForm();
                break;
            case CreateJobSection.SelectPhase:
                ShowPhases();
                break;
            default:
                throw new ArgumentOutOfRangeException(nameof(section), section, null);
        }
    }

}