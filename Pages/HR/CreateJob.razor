@page "/createjob"
@inject HttpClient HttpClient
@inject IJSRuntime jsRuntime
@inject NavigationManager nav

<style>
    .sub-container {
        display: flex;
    }

    .select-collaborators {
        width: 200px;
        text-align: center;
    }

    .headingPage {
        height: 5vh;
        color: #003340
    }

    .formButton {
        background-color: #00BCAE;
        color: white;
        font-weight: 600;
    }

    .select2 {
        width: 100% !important;
    }

    ::-webkit-scrollbar {
        width: 10px;
    }

    ::-webkit-scrollbar-track {
        background: #f1f1f1;
        border-radius: 10px;
    }

    ::-webkit-scrollbar-thumb {
        background: #888;
        border-radius: 10px;
    }

        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

    .create-job-header {
        font-family: opensans-condensed-bold;
        font-weight: 700;
        color: white;
        background-color: #00bcae;
        text-align: center;
        font-size: 1em;
        border-top-right-radius: 2em;
        border-top-left-radius: 2em;
        width: 100%;
        text-transform: uppercase;
    }

    .create-job-form {
        box-shadow: rgba(0, 0, 0, 0.8) 0px 5px 15px;
        border-radius: 1.8em;
    }
</style>

<!--Body Page-->
<div class="container">
    <div class="sub-container">
        <!--The Form for creating a job-->
        <div class="create-job-form">
            <div class="create-job-header">Create Job</div>
            <div class="" style="height:500px; background-color: transparent">
                <div class="col-11" style="margin-left: 10px">
                    <form style="width: 106%; padding-left: 5px; padding-right: 5px">
                        <div class="row">
                            <div class="col-12 p-1 justify-content-center" style="margin-left: 250px">
                                <label style="margin-left: 225px">Job Title</label>
                                <input type="text" class="form-control text-center" placeholder="Job Name" style="width: 50%" @bind="tempJob.Title" />
                            </div>
                            <div class="col-6 p-2">
                                <label>Company Name</label>
                                <input type="text" class="form-control" placeholder="Company Name" @bind="tempJob.Company" />
                            </div>
                            <div class="col-6 p-2">
                                <label>Location</label>
                                <select class="form-select" @bind="tempJob.Title">
                                    @foreach (var item in mockLocations)
                                    {
                                        <option>@item.location</option>
                                    }
                                </select>
                            </div>
                            <div class="col-6 p-2">
                                <label>Job Type</label>
                                <select class="form-select selectMultiOptions1">
                                    @foreach (var item in jobTypes)
                                    {
                                        <option>@item.Type</option>
                                    }
                                </select>
                            </div>
                            <div class="col-6 p-2">
                                <label>Department</label>
                                <select class="form-select" @bind="tempJob.Department">
                                    @foreach (var item in mockDepartments)
                                    {
                                        <option>@item.department</option>
                                    }
                                </select>
                            </div>
                            <div class="col-12 p-2">
                                <label>Job Description</label>
                                <textarea class="form-control" style="resize: none" placeholder="Description" rows="4" @bind="tempJob.Description">
                        </textarea>
                            </div>
                            <div class="col-6 p-2">

                                @foreach (var jobPlatform in jobPlatforms)
                                {
                                    <input class="smallerCheckBox" type="checkbox" id="@jobPlatform.id" name="@jobPlatform.platformName" @onclick="(e) => AddPlatfrom(jobPlatform, ToggleChecked())">
                                    <label for="@jobPlatform.id"> @jobPlatform.platformName</label>
                                }

                            </div>
                            <div class="col-6">
                                <div class="row">
                                    <div class="col-12 p-2">
                                        <label>Date Advertised</label>
                                        <input class="form-control" type="date" placeholder="Date Advertised" onfocus="(this.type='date')" onblur="(this.type='text')" @bind="tempJob.CreationDate" />
                                    </div>
                                    <div class="col-12 p-2">
                                        <label>Due Date</label>
                                        <input class="form-control" type="date" placeholder="Due Date" onfocus="(this.type='date')" onblur="(this.type='text')" @bind="tempJob.DueDate" />
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
        <!--Tables of developers/HR-->
        <div class="select-collaborators">
            <div class="create-job-header">Collaborators</div>
            <div style="overflow: auto; height: 125px">
                <table>
                    @foreach (var developer in developersAdded)
                    {
                        <tr>
                            <td>@developer.Role</td>
                            <td style="text-align: right; font-weight: bold; font-size:25px" @onclick='() => RemoveCollaborator(developer)'>&times;</td>
                        </tr>

                    }
                </table>
            </div>
            <div class="create-job-header">Select Collaborators</div>

            <div style="overflow: auto; height: 255px">

                <table style="background-color: transparent">

                    @foreach (var developer in developers)
                    {
                        <tr>
                            <td @onclick='() =>AddCollaborator(developer)'>@developer.Role</td>
                        </tr>
                    }

                </table>

            </div>
        </div>
    </div>

    <!--Button-->
    <br />
    <div class="d-flex justify-content-center"><button class="btn formButton" @onclick='() => navTo(tempJob)'>Application Form</button></div>
</div>


@code {

    private void navTo(CreateJobPost tempJob)
    {
        nav.NavigateTo($"/applicationformcontroltool/{tempJob}");
    }

}